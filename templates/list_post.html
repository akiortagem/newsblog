{% extends 'base_admin.html' %}
{% load tag_addcss %}
{% load key_value_filter %}
{% block additional_head %}
<link rel="stylesheet" href="/static/css/bootstrap-datetimepicker.min.css" />
<script type="text/javascript" src="/static/js/moment.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.js"></script>
<script type="text/javascript" src="/static/js/bootstrap-datetimepicker.min.js"></script>
{% endblock %}
{% block content %}
<div class="container">
	<h3>List of {{ view_name }}</h3>
  <form action="" method="get" id="searchForm" class="form-inline">
    {% csrf_token %}
    <div class="row">
	    <div class="form-group">
	      {{ search_form.category|addcss:"form-control input-sm" }}
	    </div>
	    <div class="form-group">
	      {{ search_form.title|addcss:"form-control input-sm" }}
	    </div>
	    <div class="form-group">
	      {{ search_form.author|addcss:"form-control input-sm" }}
	    </div>
	    <div class="form-group">
	      {{ search_form.date_from|addcss:"form-control input-sm" }}
	    </div>
	    <div class="form-group">
	      {{ search_form.date_till|addcss:"form-control input-sm" }}
	    </div>
    </div>
    <div class="row">
    	<button type="submit" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-search"></span></button>
    </div>
  </form>
	{% if paged_data %}
<table class="table table-striped table-bordered table-hover table-condensed tablesorter">
	<tr>
		{% for field in fields %}
			<th>{{ field|title }}</th>
		{% endfor %}
		<th>Actions</th>
	</tr>
	{% for data in paged_data%}
		<tr>
			{% for field in fields %}
				<td>{{ data|getmodelval:field }}</td>
			{% endfor %}
			<td>
				<a href="{% url 'blog:view_post' slug=data.slug %}" class="btn btn-info" data-toggle="tooltip" data-placement="right" title="view post">
					<span class="glyphicon glyphicon-eye-open"></span>
				</a>
				<a href="{% url 'blog:edit_post' slug=data.slug %}" class="btn btn-info" data-toggle="tooltip" data-placement="right" title="edit post">
					<span class="glyphicon glyphicon-edit"></span>
				</a>
				<a href="#" class="btn btn-info" data-toggle="tooltip" data-placement="right" title="delete">
					<span class="glyphicon glyphicon-remove"></span>
				</a>
			</td>
		</tr>
	{% endfor %}
</table>
	     <a href="{% url 'blog:new_post' %}" class="btn btn-info">
         	<span class="glyphicon glyphicon-plus"></span> Create New {{ Name }}
        </a>
</div>
<div>
<center> 
<ul class="pagination">
        {% if paged_data.has_previous %}
                <li> <a href="?page={{ paged_data.previous_page_number }}">&laquo;</a></li>
        {% else %}
                <li class="disabled"> <a href=#>&laquo;</a></li>
        {% endif %}

	{% if paged_data.number > 10 %}
		<li><a href="?page={{ pages_append.0 }}">1</a></li>
		<li><a href="?page={{ pages_append.1 }}">...</a></li>
	{% endif %}
	{% for page in pages %}
		{% if page == paged_data.number %}
                        <li class="active"><a href="?page{{ page }}">{{ page }}</a></li>
                {% else %}
                        <li><a href="?page={{ page }}">{{ page }}</a></li>
                {% endif %}
	{% endfor %}

	{% if paged_data.number > 10 and paged_data.number < paged_data.paginator.num_pages%}
		<li><a href="?page={{ pages_append.2 }}">...</a></li>
	{% elif paged_data.number < paged_data.paginator.num_pages %}
		<li><a href="?page={{ pages_append.0 }}">...</a></li>
	{% endif %}

        {% if paged_data.number < paged_data.paginator.num_pages %}
                <li><a href="?page={{ paged_data.paginator.num_pages }}">{{ paged_data.paginator.num_pages }}</a></li>
        {% endif %}

        {% if paged_data.has_next %}
                <li> <a href="?page={{ paged_data.next_page_number }}">&raquo;</a></li>
        {% else %}
                <li class="disabled"> <a href=#>&raquo;</a></li>
        {% endif %}
</ul>
</center>
</div>
	{% else %}
	<div class="container">
  		<h3>Error</h3>
  		<p>Object {{ view }} is not found</p>
	</div>
	{% endif %}
{% endblock %}
{% block additional_content %}
<script>
		$("#id_date_from").datetimepicker({
			format:"YYYY-MM-DD", showTodayButton:true, showClose:true
		})
		$("#id_date_till").datetimepicker({
			format:"YYYY-MM-DD", showTodayButton:true, showClose:true
		})
		$("#id_date_from").attr('placeholder', 'Dari tanggal');
		$("#id_date_till").attr('placeholder', 'Hingga tanggal');
</script>
{% endblock %}
